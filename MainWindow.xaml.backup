<Window x:Class="OpenClawGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:OpenClawGUI"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        mc:Ignorable="d"
        Title="🦞 OpenClaw - Personal AI Assistant" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#0D1117">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top Bar -->
        <Border Grid.Row="0" Background="#161B22" Padding="15,10" BorderBrush="#30363D" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" Grid.Column="0">
                    <TextBlock Text="🦞" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center"/>
                    <TextBlock Text="OpenClaw" FontSize="20" FontWeight="Bold" Foreground="#58A6FF" VerticalAlignment="Center"/>
                    <Border Background="#238636" CornerRadius="4" Padding="10,4" Margin="15,0,0,0">
                        <TextBlock x:Name="StatusText" Text="● ONLINE" Foreground="#FFFFFF" FontSize="11" FontWeight="SemiBold"/>
                    </Border>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Grid.Column="1">
                    <ComboBox x:Name="ModelSelector" Width="280" 
                              SelectionChanged="ModelSelector_SelectionChanged"
                              Foreground="#C9D1D9" Background="#21262D" 
                              BorderBrush="#30363D" BorderThickness="1"
                              Margin="0,0,10,0" Padding="8,6"/>
                    <Button x:Name="SettingsButton" Content="⚙️ Settings" 
                            Click="SettingsButton_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,6"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <Border Grid.Column="0" Background="#0D1117" BorderBrush="#30363D" BorderThickness="0,0,1,0">
                <StackPanel Margin="10">
                    <TextBlock Text="GATEWAY" Foreground="#8B949E" FontSize="10" FontWeight="Bold" Margin="5,10,5,8"/>
                    
                    <Button x:Name="StartGatewayButton" Content="▶ START GATEWAY" 
                            Click="StartGateway_Click"
                            Background="#238636" Foreground="#FFFFFF" 
                            BorderBrush="#2EA043" BorderThickness="1"
                            Padding="12,10" Margin="0,5" HorizontalAlignment="Stretch"
                            FontWeight="SemiBold" FontSize="11"/>
                    
                    <Button x:Name="StopGatewayButton" Content="⏹ STOP GATEWAY" 
                            Click="StopGateway_Click"
                            Background="#DA3633" Foreground="#FFFFFF" 
                            BorderBrush="#F85149" BorderThickness="1"
                            Padding="12,10" Margin="0,5" HorizontalAlignment="Stretch"
                            FontWeight="SemiBold" FontSize="11"
                            IsEnabled="False"/>
                    
                    <Button Content="🔄 RESTART" 
                            Click="RestartGateway_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,10" Margin="0,5" HorizontalAlignment="Stretch"
                            FontWeight="SemiBold" FontSize="11"/>
                    
                    <Button Content="🔍 CHECK STATUS" 
                            Click="CheckStatus_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,10" Margin="0,5" HorizontalAlignment="Stretch"
                            FontWeight="SemiBold" FontSize="11"/>

                    <Separator Margin="0,15" Background="#21262D"/>

                    <TextBlock Text="MODELS" Foreground="#8B949E" FontSize="10" FontWeight="Bold" Margin="5,5"/>
                    
                    <Button Content="📊 Ollama Models" 
                            Click="OllamaModels_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,8" Margin="0,5" HorizontalAlignment="Stretch"/>
                    
                    <Button Content="🖥️ LMStudio Models" 
                            Click="LMStudioModels_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,8" Margin="0,5" HorizontalAlignment="Stretch"/>

                    <Separator Margin="0,15" Background="#21262D"/>

                    <TextBlock Text="SESSIONS" Foreground="#8B949E" FontSize="10" FontWeight="Bold" Margin="5,5"/>
                    
                    <Button Content="➕ New Session" 
                            Click="NewSession_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,8" Margin="0,5" HorizontalAlignment="Stretch"/>
                    
                    <ListBox x:Name="SessionsList" 
                             Background="#0D1117" 
                             Foreground="#C9D1D9"
                             BorderBrush="#30363D"
                             BorderThickness="1"
                             Margin="0,5"
                             Height="200"/>

                    <Separator Margin="0,15" Background="#21262D"/>

                    <Button Content="📂 Open Config" 
                            Click="OpenConfig_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,8" Margin="0,5" HorizontalAlignment="Stretch"/>
                    
                    <Button Content="🌐 Open Web UI" 
                            Click="OpenWebUI_Click"
                            Background="#21262D" Foreground="#C9D1D9" 
                            BorderBrush="#30363D" BorderThickness="1"
                            Padding="12,8" Margin="0,5" HorizontalAlignment="Stretch"/>
                </StackPanel>
            </Border>

            <!-- Chat Area -->
            <Grid Grid.Column="1" Background="#0D1117">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Messages -->
                <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="20">
                    <ItemsControl x:Name="MessagesPanel">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,10" Padding="15" 
                                        Background="{Binding Background}"
                                        CornerRadius="8"
                                        MaxWidth="800"
                                        HorizontalAlignment="{Binding Alignment}">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Sender}" 
                                                   FontWeight="SemiBold" 
                                                   Foreground="{Binding SenderColor}"
                                                   FontSize="12"
                                                   Margin="0,0,0,5"/>
                                        <TextBox Text="{Binding Message, Mode=OneWay}" 
                                                 TextWrapping="Wrap" 
                                                 Foreground="#E6EDF3"
                                                 Background="Transparent"
                                                 BorderThickness="0"
                                                 FontSize="14"
                                                 IsReadOnly="True"
                                                 IsTabStop="False"
                                                 Cursor="Arrow"/>
                                        <TextBlock Text="{Binding Time}" 
                                                   FontSize="10" 
                                                   Foreground="#7D8590"
                                                   Margin="0,8,0,0"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <!-- Input Area -->
                <Border Grid.Row="1" Background="#161B22" Padding="20" BorderBrush="#30363D" BorderThickness="0,1,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="MessageInput" 
                                 Grid.Column="0"
                                 Background="#0D1117" 
                                 Foreground="#E6EDF3"
                                 BorderThickness="1"
                                 BorderBrush="#30363D"
                                 Padding="15"
                                 FontSize="14"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 MaxHeight="150"
                                 VerticalScrollBarVisibility="Auto"
                                 KeyDown="MessageInput_KeyDown"
                                 ui:ControlHelper.PlaceholderText="Type your message... (Ctrl+Enter to send)"/>

                        <Button x:Name="SendButton" 
                                Grid.Column="1"
                                Content="📤 SEND" 
                                Click="SendButton_Click"
                                Background="#1F6FEB" 
                                Foreground="#FFFFFF" 
                                BorderBrush="#388BFD" 
                                BorderThickness="1"
                                Padding="24,12" 
                                Margin="10,0,0,0"
                                FontSize="13"
                                FontWeight="SemiBold"/>
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#161B22" Padding="10,6" BorderBrush="#30363D" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="StatusBarText" 
                           Text="Ready" 
                           Foreground="#7D8590" 
                           FontSize="12"
                           VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock x:Name="TokenCount" Text="Tokens: 0" Foreground="#58A6FF" FontSize="12" Margin="0,0,15,0"/>
                    <TextBlock x:Name="ModelInfo" Text="Model: Not Connected" Foreground="#58A6FF" FontSize="12"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>

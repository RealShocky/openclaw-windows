<UserControl x:Class="OpenClawGUI.Pages.UsagePage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.modernwpf.com/2019"
             Background="#0D1117">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <TextBlock Text="USAGE" FontSize="24" FontWeight="Bold" Foreground="#E6EDF3" Margin="0,0,0,5"/>
            <TextBlock Text="Token usage and cost tracking" FontSize="14" Foreground="#7D8590" Margin="0,0,0,15"/>
            <Button Content="ðŸ”„ Refresh Stats" Click="Refresh_Click"
                    Background="#238636" Foreground="White" BorderThickness="0"
                    Padding="15,10" Margin="0,0,0,15" FontWeight="SemiBold"/>

            <!-- Summary Cards -->
            <WrapPanel Margin="0,0,0,25">
                <!-- Total Tokens -->
                <Border Background="#161B22" BorderBrush="#30363D" BorderThickness="1" CornerRadius="8" 
                        Padding="20" Margin="0,0,15,15" Width="250">
                    <StackPanel>
                        <TextBlock Text="TOTAL TOKENS" FontSize="11" FontWeight="Bold" Foreground="#7D8590" Margin="0,0,0,8"/>
                        <TextBlock Text="1,247,832" FontSize="32" FontWeight="Bold" Foreground="#58A6FF"/>
                        <TextBlock Text="This month" FontSize="12" Foreground="#7D8590" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Input Tokens -->
                <Border Background="#161B22" BorderBrush="#30363D" BorderThickness="1" CornerRadius="8" 
                        Padding="20" Margin="0,0,15,15" Width="250">
                    <StackPanel>
                        <TextBlock Text="INPUT TOKENS" FontSize="11" FontWeight="Bold" Foreground="#7D8590" Margin="0,0,0,8"/>
                        <TextBlock Text="847,291" FontSize="32" FontWeight="Bold" Foreground="#238636"/>
                        <TextBlock Text="Prompts sent" FontSize="12" Foreground="#7D8590" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Output Tokens -->
                <Border Background="#161B22" BorderBrush="#30363D" BorderThickness="1" CornerRadius="8" 
                        Padding="20" Margin="0,0,15,15" Width="250">
                    <StackPanel>
                        <TextBlock Text="OUTPUT TOKENS" FontSize="11" FontWeight="Bold" Foreground="#7D8590" Margin="0,0,0,8"/>
                        <TextBlock Text="400,541" FontSize="32" FontWeight="Bold" Foreground="#1F6FEB"/>
                        <TextBlock Text="Responses received" FontSize="12" Foreground="#7D8590" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Estimated Cost -->
                <Border Background="#161B22" BorderBrush="#30363D" BorderThickness="1" CornerRadius="8" 
                        Padding="20" Margin="0,0,15,15" Width="250">
                    <StackPanel>
                        <TextBlock Text="ESTIMATED COST" FontSize="11" FontWeight="Bold" Foreground="#7D8590" Margin="0,0,0,8"/>
                        <TextBlock Text="$0.00" FontSize="32" FontWeight="Bold" Foreground="#238636"/>
                        <TextBlock Text="Local models = Free!" FontSize="12" Foreground="#7D8590" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
            </WrapPanel>

            <!-- Usage by Model -->
            <Border Background="#161B22" BorderBrush="#30363D" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="ðŸ“Š USAGE BY MODEL" FontSize="14" FontWeight="Bold" Foreground="#58A6FF" Margin="0,0,0,20"/>
                    
                    <!-- Ollama Model -->
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="250"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="ollama/qwen2.5-coder:7b" FontSize="14" FontWeight="SemiBold" Foreground="#E6EDF3"/>
                            <TextBlock Text="Primary model" FontSize="11" Foreground="#7D8590"/>
                        </StackPanel>
                        <Border Grid.Column="1" Background="#21262D" CornerRadius="4" Height="20" Margin="15,0">
                            <Border Background="#238636" CornerRadius="4" HorizontalAlignment="Left" Width="280"/>
                        </Border>
                        <TextBlock Grid.Column="2" Text="892,451" Foreground="#E6EDF3" FontWeight="SemiBold" HorizontalAlignment="Right"/>
                    </Grid>

                    <!-- LMStudio Model -->
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="250"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="lmstudio/qwen2.5-vl-7b" FontSize="14" FontWeight="SemiBold" Foreground="#E6EDF3"/>
                            <TextBlock Text="Fallback model" FontSize="11" Foreground="#7D8590"/>
                        </StackPanel>
                        <Border Grid.Column="1" Background="#21262D" CornerRadius="4" Height="20" Margin="15,0">
                            <Border Background="#1F6FEB" CornerRadius="4" HorizontalAlignment="Left" Width="150"/>
                        </Border>
                        <TextBlock Grid.Column="2" Text="355,381" Foreground="#E6EDF3" FontWeight="SemiBold" HorizontalAlignment="Right"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Recent Sessions -->
            <Border Background="#161B22" BorderBrush="#30363D" BorderThickness="1" CornerRadius="8" Padding="20">
                <StackPanel>
                    <TextBlock Text="ðŸ“‹ RECENT SESSIONS" FontSize="14" FontWeight="Bold" Foreground="#58A6FF" Margin="0,0,0,20"/>
                    
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Session ID" FontSize="11" FontWeight="Bold" Foreground="#7D8590"/>
                        <TextBlock Grid.Column="1" Text="Model" FontSize="11" FontWeight="Bold" Foreground="#7D8590"/>
                        <TextBlock Grid.Column="2" Text="Tokens" FontSize="11" FontWeight="Bold" Foreground="#7D8590"/>
                        <TextBlock Grid.Column="3" Text="Time" FontSize="11" FontWeight="Bold" Foreground="#7D8590"/>
                    </Grid>

                    <Border Background="#0D1117" CornerRadius="4" Padding="10" Margin="0,0,0,8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="100"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="gui-session" Foreground="#E6EDF3"/>
                            <TextBlock Grid.Column="1" Text="ollama/qwen2.5-coder:7b" Foreground="#58A6FF"/>
                            <TextBlock Grid.Column="2" Text="24,521" Foreground="#E6EDF3"/>
                            <TextBlock Grid.Column="3" Text="Active" Foreground="#238636"/>
                        </Grid>
                    </Border>

                    <Border Background="#0D1117" CornerRadius="4" Padding="10" Margin="0,0,0,8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="100"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="session-20260218" Foreground="#E6EDF3"/>
                            <TextBlock Grid.Column="1" Text="ollama/qwen2.5-coder:7b" Foreground="#58A6FF"/>
                            <TextBlock Grid.Column="2" Text="156,832" Foreground="#E6EDF3"/>
                            <TextBlock Grid.Column="3" Text="2h ago" Foreground="#7D8590"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>

<UserControl x:Class="OpenClawGUI.Pages.LogsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.modernwpf.com/2019"
             Background="#0D1117"
             Loaded="Page_Loaded">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="LOGS" FontSize="24" FontWeight="Bold" Foreground="#E6EDF3" Margin="0,0,0,5"/>
            <TextBlock Text="Real-time system and agent logs" FontSize="14" Foreground="#7D8590"/>
        </StackPanel>

        <!-- Filters -->
        <Border Grid.Row="1" Background="#161B22" BorderBrush="#30363D" BorderThickness="1" 
                CornerRadius="6" Padding="15" Margin="0,0,0,15">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Level:" Foreground="#7D8590" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <ComboBox x:Name="LevelFilter" Width="120" Margin="0,0,20,0" SelectionChanged="LevelFilter_Changed"
                          Background="#21262D" Foreground="#E6EDF3" BorderBrush="#30363D">
                    <ComboBoxItem Content="All" IsSelected="True"/>
                    <ComboBoxItem Content="Debug"/>
                    <ComboBoxItem Content="Info"/>
                    <ComboBoxItem Content="Warning"/>
                    <ComboBoxItem Content="Error"/>
                </ComboBox>

                <TextBlock Text="Search:" Foreground="#7D8590" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBox x:Name="SearchBox" Width="200" Margin="0,0,20,0" TextChanged="SearchBox_Changed"
                         Background="#0D1117" Foreground="#E6EDF3" BorderBrush="#30363D" Padding="8"/>

                <Button Content="ðŸ”„ Refresh" Click="Refresh_Click"
                        Background="#238636" Foreground="White" BorderThickness="0"
                        Padding="12,8" Margin="0,0,10,0" FontWeight="SemiBold"/>
                <Button Content="ðŸ—‘ï¸ Clear" Click="Clear_Click"
                        Background="#21262D" Foreground="#C9D1D9" BorderBrush="#30363D" BorderThickness="1"
                        Padding="12,8" Margin="0,0,10,0" FontWeight="SemiBold"/>
                <Button Content="ðŸ“‹ Copy All" Click="CopyAll_Click"
                        Background="#21262D" Foreground="#C9D1D9" BorderBrush="#30363D" BorderThickness="1"
                        Padding="12,8" FontWeight="SemiBold"/>
            </StackPanel>
        </Border>

        <!-- Log Viewer -->
        <Border Grid.Row="2" Background="#0D1117" BorderBrush="#30363D" BorderThickness="1" CornerRadius="6">
            <ScrollViewer x:Name="LogScroller" VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="LogsList" Padding="10">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="{Binding Background}" CornerRadius="4" Padding="10" Margin="0,0,0,5">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80"/>
                                        <ColumnDefinition Width="70"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding Time}" Foreground="#7D8590" FontFamily="Consolas" FontSize="12"/>
                                    <Border Grid.Column="1" Background="{Binding LevelColor}" CornerRadius="3" Padding="5,2" 
                                            HorizontalAlignment="Left" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Level}" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                    </Border>
                                    <TextBox Grid.Column="2" Text="{Binding Message, Mode=OneWay}" Foreground="#E6EDF3" 
                                             Background="Transparent" BorderThickness="0" IsReadOnly="True"
                                             FontFamily="Consolas" FontSize="12" TextWrapping="Wrap" Margin="10,0,0,0"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
